---
import Layout from '../layouts/Layout.astro';
const token = Astro.cookies.get("token");
const response = await fetch('http://localhost:3000/posts',{
	method: 'GET',
	headers: {
		'Content-Type': 'application/json',
		'Authorization': `Bearer ${token?.value}`
	},
});
const data = await response.json();
console.log("data: ", data)
            
---

<Layout title="Frontend Astro">
	<main>
		<h1 class="text-7xl text-center font-extrabold text-primary">Bienvenido a<span class="text-secondary block">ðŸš€ Astro 5</span></h1>
		<section>
			{
				Astro.cookies.get("token") ?
				data.length > 0 ?
				<h2>Publicaciones recientes</h2>
				<p>Hay {data.length} publicaciones</p>
				:
				<h2>No hay publicaciones recientes</h2>
				:
				<h2>Inicia sesiÃ³n para ver las publicaciones recientes</h2>
			}
			
		</section>
	</main>
</Layout>

